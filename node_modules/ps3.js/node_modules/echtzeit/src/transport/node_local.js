echtzeit.Transport.NodeLocal = echtzeit.extend(echtzeit.Class(echtzeit.Transport, {
	batching: false,

	request: function(messages) {
		messages = echtzeit.copyObject(messages);
		this.endpoint.process(messages, null, function(replies) {
			this._receive(echtzeit.copyObject(replies));
		}, this);
	}
}), {
	isUsable: function(client, endpoint, callback, context) {
		callback.call(context, endpoint instanceof echtzeit.Server);
	}
});

echtzeit.Transport.register('in-process', echtzeit.Transport.NodeLocal);
